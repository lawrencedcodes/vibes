(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[557],{5763:(e,s,t)=>{Promise.resolve().then(t.bind(t,4272))},6046:(e,s,t)=>{"use strict";var i=t(6658);t.o(i,"useParams")&&t.d(s,{useParams:function(){return i.useParams}}),t.o(i,"useRouter")&&t.d(s,{useRouter:function(){return i.useRouter}})},4272:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var i=t(5155),l=t(2115),a=t(6046),r=t(8291);function n(){let e=(0,a.useRouter)(),s=(0,r.Ht)(),[t,n]=(0,l.useState)([]),[c,d]=(0,l.useState)([]),[o,m]=(0,l.useState)(!0),[h,x]=(0,l.useState)(""),[u,g]=(0,l.useState)(""),[f,p]=(0,l.useState)(""),[y,j]=(0,l.useState)("beginner"),[v,N]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(!s){e.push("/login");return}(async()=>{try{let e=await fetch("/api/profile");if(!e.ok)throw Error("Failed to fetch profile data");let s=await e.json(),t=s.technologies.filter(e=>e.proficiency_level),i=s.technologies;n(i),d(t),m(!1)}catch(e){x(e.message),m(!1)}})()},[e,s]);let b=async e=>{if(e.preventDefault(),x(""),g(""),!f){x("Please select a technology");return}N(!0);try{let e=await fetch("/api/profile/technologies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({technology_id:f,proficiency_level:y})}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to add technology");let t=await fetch("/api/profile"),i=(await t.json()).technologies.filter(e=>e.proficiency_level);d(i),p(""),g("Technology added successfully")}catch(e){x(e.message)}finally{N(!1)}},w=async e=>{x(""),g("");try{let s=await fetch("/api/profile/technologies?technology_id=".concat(e),{method:"DELETE"}),t=await s.json();if(!s.ok)throw Error(t.error||"Failed to remove technology");d(c.filter(s=>s.id!==parseInt(e))),g("Technology removed successfully")}catch(e){x(e.message)}};return o?(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)("p",{className:"text-lg text-gray-600",children:"Loading technologies..."})})}):(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,i.jsx)("header",{className:"bg-white shadow",children:(0,i.jsx)("div",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Your Technologies"}),(0,i.jsx)("button",{onClick:()=>e.push("/dashboard"),className:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",children:"Back to Dashboard"})]})})}),(0,i.jsx)("main",{children:(0,i.jsx)("div",{className:"mx-auto max-w-7xl py-6 sm:px-6 lg:px-8",children:(0,i.jsx)("div",{className:"px-4 py-6 sm:px-0",children:(0,i.jsx)("div",{className:"bg-white shadow sm:rounded-lg",children:(0,i.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[h&&(0,i.jsx)("div",{className:"rounded-md bg-red-50 p-4 mb-6",children:(0,i.jsx)("div",{className:"flex",children:(0,i.jsxs)("div",{className:"ml-3",children:[(0,i.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,i.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,i.jsx)("p",{children:h})})]})})}),u&&(0,i.jsx)("div",{className:"rounded-md bg-green-50 p-4 mb-6",children:(0,i.jsx)("div",{className:"flex",children:(0,i.jsxs)("div",{className:"ml-3",children:[(0,i.jsx)("h3",{className:"text-sm font-medium text-green-800",children:"Success"}),(0,i.jsx)("div",{className:"mt-2 text-sm text-green-700",children:(0,i.jsx)("p",{children:u})})]})})}),(0,i.jsxs)("div",{className:"space-y-8",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:(null==s?void 0:s.role)==="teacher"?"Technologies You Teach":"Technologies You Want to Learn"}),(0,i.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:(null==s?void 0:s.role)==="teacher"?"Select the technologies you can teach to others.":"Select the technologies you want to learn from others."})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"text-md font-medium text-gray-700",children:"Your Selected Technologies"}),0===c.length?(0,i.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"You haven't selected any technologies yet."}):(0,i.jsx)("ul",{className:"mt-3 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3",children:c.map(e=>(0,i.jsxs)("li",{className:"col-span-1 bg-white rounded-lg shadow divide-y divide-gray-200",children:[(0,i.jsx)("div",{className:"w-full flex items-center justify-between p-6 space-x-6",children:(0,i.jsxs)("div",{className:"flex-1 truncate",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("h3",{className:"text-gray-900 text-sm font-medium truncate",children:e.name}),(0,i.jsx)("span",{className:"flex-shrink-0 inline-block px-2 py-0.5 text-green-800 text-xs font-medium bg-green-100 rounded-full",children:e.proficiency_level})]}),(0,i.jsx)("p",{className:"mt-1 text-gray-500 text-sm truncate",children:e.description})]})}),(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"-mt-px flex divide-x divide-gray-200",children:(0,i.jsx)("div",{className:"w-0 flex-1 flex",children:(0,i.jsx)("button",{onClick:()=>w(e.id),className:"relative -mr-px w-0 flex-1 inline-flex items-center justify-center py-4 text-sm text-red-700 font-medium border border-transparent rounded-bl-lg hover:text-red-500",children:"Remove"})})})})]},e.id))})]}),(0,i.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,i.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-4",children:"Add a Technology"}),(0,i.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[(0,i.jsxs)("div",{className:"sm:col-span-3",children:[(0,i.jsx)("label",{htmlFor:"technology",className:"block text-sm font-medium text-gray-700",children:"Technology"}),(0,i.jsx)("div",{className:"mt-1",children:(0,i.jsxs)("select",{id:"technology",name:"technology",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:f,onChange:e=>p(e.target.value),required:!0,children:[(0,i.jsx)("option",{value:"",children:"Select a technology"}),t.map(e=>(0,i.jsx)("option",{value:e.id,children:e.name},e.id))]})})]}),(0,i.jsxs)("div",{className:"sm:col-span-3",children:[(0,i.jsx)("label",{htmlFor:"proficiency",className:"block text-sm font-medium text-gray-700",children:(null==s?void 0:s.role)==="teacher"?"Teaching Proficiency":"Current Level"}),(0,i.jsx)("div",{className:"mt-1",children:(0,i.jsxs)("select",{id:"proficiency",name:"proficiency",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:y,onChange:e=>j(e.target.value),required:!0,children:[(0,i.jsx)("option",{value:"beginner",children:"Beginner"}),(0,i.jsx)("option",{value:"intermediate",children:"Intermediate"}),(0,i.jsx)("option",{value:"advanced",children:"Advanced"}),(0,i.jsx)("option",{value:"expert",children:"Expert"})]})})]})]}),(0,i.jsx)("div",{className:"pt-5",children:(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsx)("button",{type:"submit",disabled:v||!f,className:"ml-3 inline-flex justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:bg-indigo-400",children:v?"Adding...":"Add Technology"})})})]})]})]})]})})})})})]})}},8291:(e,s,t)=>{"use strict";function i(){return{userId:1,email:"user@example.com",role:"learner",firstName:"Demo",lastName:"User"}}t.d(s,{Ht:()=>i})}},e=>{var s=s=>e(e.s=s);e.O(0,[441,517,358],()=>s(5763)),_N_E=e.O()}]);